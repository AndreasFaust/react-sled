{"ast":null,"code":"import { useDrag } from 'react-use-gesture';\nimport { useStateContext } from '../state';\nexport default (set => {\n  const [{\n    dragging,\n    dragDistance,\n    dimensions: {\n      width,\n      height\n    },\n    currentIndex,\n    direction,\n    stopOnInteraction,\n    showElements,\n    slideBy\n  }, dispatch] = useStateContext();\n  const bind = useDrag(({\n    down,\n    movement: [xDelta, yDelta],\n    direction: [xDir, yDir],\n    distance,\n    cancel,\n    canceled\n  }) => {\n    if (canceled) return;\n\n    if (stopOnInteraction) {\n      dispatch({\n        type: 'SET_AUTOPLAY',\n        autoPlayInterval: undefined\n      });\n    }\n\n    if (down && distance > dragDistance) {\n      const dirValue = direction === 'horizontal' ? xDir : yDir;\n      dispatch({\n        type: dirValue > 0 ? 'PREV' : 'NEXT',\n        pause: true\n      });\n      cancel();\n    }\n\n    set(() => {\n      const x = direction === 'horizontal' ? -currentIndex * (width / showElements * slideBy) + (down ? xDelta : 0) : -currentIndex * (height / showElements * slideBy) + (down ? yDelta : 0);\n      return {\n        x,\n        immediate: false,\n        cursor: down ? 'grabbing' : 'grab',\n        onStart: undefined,\n        onRest: undefined\n      };\n    });\n    dispatch({\n      type: 'SET_PAUSE',\n      pause: true\n    });\n  });\n  return dragging && bind;\n});","map":{"version":3,"sources":["/Users/andreasfaust/components/react-sled/sled/hooks/useDragGesture.ts"],"names":["useDrag","useStateContext","set","dragging","dragDistance","dimensions","width","height","currentIndex","direction","stopOnInteraction","showElements","slideBy","dispatch","bind","down","movement","xDelta","yDelta","xDir","yDir","distance","cancel","canceled","type","autoPlayInterval","undefined","dirValue","pause","x","immediate","cursor","onStart","onRest"],"mappings":"AAAA,SAASA,OAAT,QAAwB,mBAAxB;AACA,SAASC,eAAT,QAAgC,UAAhC;AAOA,gBAAgBC,GAAD,IAAgC;AAC7C,QAAM,CAAC;AACLC,IAAAA,QADK;AAELC,IAAAA,YAFK;AAGLC,IAAAA,UAAU,EAAE;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAHP;AAILC,IAAAA,YAJK;AAKLC,IAAAA,SALK;AAMLC,IAAAA,iBANK;AAOLC,IAAAA,YAPK;AAQLC,IAAAA;AARK,GAAD,EASHC,QATG,IASSZ,eAAe,EAT9B;AAWA,QAAMa,IAAI,GAAGd,OAAO,CAAC,CAAC;AACpBe,IAAAA,IADoB;AAEpBC,IAAAA,QAAQ,EAAE,CAACC,MAAD,EAASC,MAAT,CAFU;AAGpBT,IAAAA,SAAS,EAAE,CAACU,IAAD,EAAOC,IAAP,CAHS;AAIpBC,IAAAA,QAJoB;AAKpBC,IAAAA,MALoB;AAMpBC,IAAAA;AANoB,GAAD,KAOf;AACJ,QAAIA,QAAJ,EAAc;;AAEd,QAAIb,iBAAJ,EAAuB;AACrBG,MAAAA,QAAQ,CAAC;AAAEW,QAAAA,IAAI,EAAE,cAAR;AAAwBC,QAAAA,gBAAgB,EAAEC;AAA1C,OAAD,CAAR;AACD;;AACD,QAAIX,IAAI,IAAIM,QAAQ,GAAGjB,YAAvB,EAAqC;AACnC,YAAMuB,QAAQ,GAAGlB,SAAS,KAAK,YAAd,GAA6BU,IAA7B,GAAoCC,IAArD;AACAP,MAAAA,QAAQ,CAAC;AACPW,QAAAA,IAAI,EAAEG,QAAQ,GAAG,CAAX,GACF,MADE,GAEF,MAHG;AAIPC,QAAAA,KAAK,EAAE;AAJA,OAAD,CAAR;AAMAN,MAAAA,MAAM;AACP;;AACDpB,IAAAA,GAAG,CAAC,MAAM;AACR,YAAM2B,CAAC,GAAGpB,SAAS,KAAK,YAAd,GACL,CAACD,YAAD,IAAiBF,KAAK,GAAGK,YAAR,GAAuBC,OAAxC,CAAD,IAAsDG,IAAI,GAAGE,MAAH,GAAY,CAAtE,CADM,GAEL,CAACT,YAAD,IAAiBD,MAAM,GAAGI,YAAT,GAAwBC,OAAzC,CAAD,IAAuDG,IAAI,GAAGG,MAAH,GAAY,CAAvE,CAFJ;AAGA,aAAO;AACLW,QAAAA,CADK;AAELC,QAAAA,SAAS,EAAE,KAFN;AAGLC,QAAAA,MAAM,EAAEhB,IAAI,GAAG,UAAH,GAAgB,MAHvB;AAILiB,QAAAA,OAAO,EAAEN,SAJJ;AAKLO,QAAAA,MAAM,EAAEP;AALH,OAAP;AAOD,KAXE,CAAH;AAYAb,IAAAA,QAAQ,CAAC;AAAEW,MAAAA,IAAI,EAAE,WAAR;AAAqBI,MAAAA,KAAK,EAAE;AAA5B,KAAD,CAAR;AACD,GApCmB,CAApB;AAsCA,SAAOzB,QAAQ,IAAIW,IAAnB;AACD,CAnDD","sourcesContent":["import { useDrag } from 'react-use-gesture'\nimport { useStateContext } from '../state'\nimport { SpringsUpdateFn } from 'react-spring'\n\ninterface ISet {\n  x: number\n}\n\nexport default (set: SpringsUpdateFn<ISet>) => {\n  const [{\n    dragging,\n    dragDistance,\n    dimensions: { width, height },\n    currentIndex,\n    direction,\n    stopOnInteraction,\n    showElements,\n    slideBy\n  }, dispatch] = useStateContext()\n\n  const bind = useDrag(({\n    down,\n    movement: [xDelta, yDelta],\n    direction: [xDir, yDir],\n    distance,\n    cancel,\n    canceled,\n  }) => {\n    if (canceled) return\n\n    if (stopOnInteraction) {\n      dispatch({ type: 'SET_AUTOPLAY', autoPlayInterval: undefined })\n    }\n    if (down && distance > dragDistance) {\n      const dirValue = direction === 'horizontal' ? xDir : yDir\n      dispatch({\n        type: dirValue > 0\n          ? 'PREV'\n          : 'NEXT',\n        pause: true\n      })\n      cancel()\n    }\n    set(() => {\n      const x = direction === 'horizontal'\n        ? (-currentIndex * (width / showElements * slideBy)) + (down ? xDelta : 0)\n        : (-currentIndex * (height / showElements * slideBy)) + (down ? yDelta : 0)\n      return {\n        x,\n        immediate: false,\n        cursor: down ? 'grabbing' : 'grab',\n        onStart: undefined,\n        onRest: undefined\n      }\n    })\n    dispatch({ type: 'SET_PAUSE', pause: true })\n  })\n\n  return dragging && bind\n}\n"]},"metadata":{},"sourceType":"module"}