{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/andreasfaust/components/react-sled/sled/progress/track.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { useSpring, animated } from 'react-spring';\nimport { useStateContext } from '../state';\n\nfunction getX(slideSteps, currentIndex) {\n  var goPrevNext = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return 100 - 100 / slideSteps * (currentIndex + goPrevNext);\n}\n\nvar SledProgressTrack = function SledProgressTrack(_ref) {\n  var className = _ref.className;\n\n  var _useStateContext = useStateContext(),\n      _useStateContext2 = _slicedToArray(_useStateContext, 1),\n      _useStateContext2$ = _useStateContext2[0],\n      currentIndex = _useStateContext2$.currentIndex,\n      prevIndex = _useStateContext2$.prevIndex,\n      slideSteps = _useStateContext2$.slideSteps,\n      autoPlayInterval = _useStateContext2$.autoPlayInterval,\n      pause = _useStateContext2$.pause,\n      pauseOnMouseOver = _useStateContext2$.pauseOnMouseOver,\n      config = _useStateContext2$.config;\n\n  var _useSpring = useSpring(function () {\n    return {\n      from: {\n        x: 100\n      }\n    };\n  }),\n      _useSpring2 = _slicedToArray(_useSpring, 2),\n      props = _useSpring2[0],\n      set = _useSpring2[1];\n\n  useEffect(function () {\n    if (pauseOnMouseOver) {\n      set({\n        config: config,\n        x: getX(slideSteps, currentIndex),\n        reset: false\n      });\n    }\n  }, [pauseOnMouseOver]);\n  useEffect(function () {\n    if (!slideSteps) return;\n    var xCalc = getX(slideSteps, currentIndex, !autoPlayInterval && 1);\n\n    if (currentIndex === 0) {\n      set({\n        config: config,\n        from: {\n          x: 100\n        },\n        x: xCalc,\n        reset: slideSteps > 2 ? prevIndex !== 1 : true\n      });\n    } else {\n      set({\n        config: config,\n        x: xCalc,\n        reset: false\n      });\n    }\n  }, [slideSteps, currentIndex, autoPlayInterval]);\n  useEffect(function () {\n    if (!autoPlayInterval) return;\n    set({\n      config: autoPlayInterval && !pause ? {\n        duration: autoPlayInterval\n      } : config,\n      from: {\n        x: getX(slideSteps, currentIndex)\n      },\n      x: getX(slideSteps, currentIndex, !pause && 1),\n      reset: true\n    });\n  }, [pause, autoPlayInterval, slideSteps, currentIndex]);\n  return __jsx(animated.div, {\n    className: \"sled-progress-\".concat(className, \"-track\"),\n    style: {\n      position: 'absolute',\n      left: 0,\n      width: '100%',\n      pointerEvents: 'none',\n      transform: props.x.to(function (x) {\n        return \"translateX(-\".concat(x, \"%)\");\n      })\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  });\n};\n\nexport default SledProgressTrack;","map":{"version":3,"sources":["/Users/andreasfaust/components/react-sled/sled/progress/track.tsx"],"names":["React","useEffect","useSpring","animated","useStateContext","getX","slideSteps","currentIndex","goPrevNext","SledProgressTrack","className","prevIndex","autoPlayInterval","pause","pauseOnMouseOver","config","from","x","props","set","reset","xCalc","duration","position","left","width","pointerEvents","transform","to"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { useSpring, animated } from 'react-spring'\n\nimport { useStateContext } from '../state'\n\nfunction getX(slideSteps: number, currentIndex: number, goPrevNext: number = 0): number {\n  return 100 - ((100 / slideSteps) * (currentIndex + goPrevNext))\n}\n\ninterface IProps {\n  className: string\n}\n\nconst SledProgressTrack: React.FC<IProps> = ({ className }) => {\n  const [{\n    currentIndex,\n    prevIndex,\n    slideSteps,\n    autoPlayInterval,\n    pause,\n    pauseOnMouseOver,\n    config\n  }] = useStateContext()\n\n  const [props, set] = useSpring(() => ({\n    from: { x: 100 }\n  }))\n\n  useEffect(() => {\n    if (pauseOnMouseOver) {\n      set({\n        config,\n        x: getX(slideSteps, currentIndex),\n        reset: false\n      })\n    }\n  }, [pauseOnMouseOver])\n\n  useEffect(() => {\n    if (!slideSteps) return\n    const xCalc = getX(slideSteps, currentIndex, !autoPlayInterval && 1)\n    if (currentIndex === 0) {\n      set({\n        config,\n        from: { x: 100 },\n        x: xCalc,\n        reset: slideSteps > 2\n          ? prevIndex !== 1\n          : true\n      })\n    } else {\n      set({\n        config,\n        x: xCalc,\n        reset: false\n      })\n    }\n  }, [slideSteps, currentIndex, autoPlayInterval])\n\n  useEffect(() => {\n    if (!autoPlayInterval) return\n    set({\n      config: autoPlayInterval && !pause\n        ? { duration: autoPlayInterval }\n        : config,\n      from: { x: getX(slideSteps, currentIndex) },\n      x: getX(slideSteps, currentIndex, !pause && 1),\n      reset: true\n    })\n  }, [pause, autoPlayInterval, slideSteps, currentIndex])\n\n  return (\n    <animated.div\n      className={`sled-progress-${className}-track`}\n      style={{\n        position: 'absolute',\n        left: 0,\n        width: '100%',\n        pointerEvents: 'none',\n        transform: props.x.to(x => `translateX(-${x}%)`)\n      }}\n    />\n  )\n}\n\nexport default SledProgressTrack\n"]},"metadata":{},"sourceType":"module"}