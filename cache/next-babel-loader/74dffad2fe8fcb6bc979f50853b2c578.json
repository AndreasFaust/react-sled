{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime-corejs2/regenerator\");\n\nvar _classCallCheck = require(\"@babel/runtime-corejs2/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime-corejs2/helpers/createClass\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _mitt = _interopRequireDefault(require(\"../next-server/lib/mitt\"));\n\nfunction hasRel(rel, link) {\n  try {\n    link = document.createElement('link');\n    return link.relList.supports(rel);\n  } catch (_unused) {}\n}\n\nvar relPrefetch = hasRel('preload') && !hasRel('prefetch') ? // https://caniuse.com/#feat=link-rel-preload\n// macOS and iOS (Safari does not support prefetch)\n'preload' : // https://caniuse.com/#feat=link-rel-prefetch\n// IE 11, Edge 12+, nearly all evergreen\n'prefetch';\nvar hasNoModule = 'noModule' in document.createElement('script');\n\nfunction appendLink(href, rel, as) {\n  return new _promise[\"default\"](function (res, rej, link) {\n    link = document.createElement('link');\n    link.crossOrigin = process.crossOrigin;\n    link.href = href;\n    link.rel = rel;\n    if (as) link.as = as;\n    link.onload = res;\n    link.onerror = rej;\n    document.head.appendChild(link);\n  });\n}\n\nvar PageLoader =\n/*#__PURE__*/\nfunction () {\n  function PageLoader(buildId, assetPrefix) {\n    _classCallCheck(this, PageLoader);\n\n    this.buildId = buildId;\n    this.assetPrefix = assetPrefix;\n    this.pageCache = {};\n    this.prefetched = {};\n    this.pageRegisterEvents = (0, _mitt[\"default\"])();\n    this.loadingRoutes = {};\n\n    if (process.env.__NEXT_GRANULAR_CHUNKS) {\n      this.promisedBuildManifest = new _promise[\"default\"](function (resolve) {\n        if (window.__BUILD_MANIFEST) {\n          resolve(window.__BUILD_MANIFEST);\n        } else {\n          window.__BUILD_MANIFEST_CB = function () {\n            resolve(window.__BUILD_MANIFEST);\n          };\n        }\n      });\n    }\n  } // Returns a promise for the dependencies for a particular route\n\n\n  _createClass(PageLoader, [{\n    key: \"getDependencies\",\n    value: function getDependencies(route) {\n      return this.promisedBuildManifest.then(function (man) {\n        return man[route] && man[route].map(function (url) {\n          return \"/_next/\" + encodeURI(url);\n        }) || [];\n      });\n    }\n  }, {\n    key: \"normalizeRoute\",\n    value: function normalizeRoute(route) {\n      if (route[0] !== '/') {\n        throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\" + route + \"\\\"\");\n      }\n\n      route = route.replace(/\\/index$/, '/');\n      if (route === '/') return route;\n      return route.replace(/\\/$/, '');\n    }\n  }, {\n    key: \"loadPage\",\n    value: function loadPage(route) {\n      return this.loadPageScript(route).then(function (v) {\n        return v.page;\n      });\n    }\n  }, {\n    key: \"loadPageScript\",\n    value: function loadPageScript(route) {\n      var _this3 = this;\n\n      route = this.normalizeRoute(route);\n      return new _promise[\"default\"](function (resolve, reject) {\n        var fire = function fire(_ref) {\n          var error = _ref.error,\n              page = _ref.page,\n              mod = _ref.mod;\n\n          _this3.pageRegisterEvents.off(route, fire);\n\n          delete _this3.loadingRoutes[route];\n\n          if (error) {\n            reject(error);\n          } else {\n            resolve({\n              page: page,\n              mod: mod\n            });\n          }\n        }; // If there's a cached version of the page, let's use it.\n\n\n        var cachedPage = _this3.pageCache[route];\n\n        if (cachedPage) {\n          var error = cachedPage.error,\n              page = cachedPage.page,\n              mod = cachedPage.mod;\n          error ? reject(error) : resolve({\n            page: page,\n            mod: mod\n          });\n          return;\n        } // Register a listener to get the page\n\n\n        _this3.pageRegisterEvents.on(route, fire); // If the page is loading via SSR, we need to wait for it\n        // rather downloading it again.\n\n\n        if (document.querySelector(\"script[data-next-page=\\\"\" + route + \"\\\"]\")) {\n          return;\n        }\n\n        if (!_this3.loadingRoutes[route]) {\n          _this3.loadingRoutes[route] = true;\n\n          if (process.env.__NEXT_GRANULAR_CHUNKS) {\n            _this3.getDependencies(route).then(function (deps) {\n              deps.forEach(function (d) {\n                if (/\\.js$/.test(d) && !document.querySelector(\"script[src^=\\\"\" + d + \"\\\"]\")) {\n                  _this3.loadScript(d, route, false);\n                }\n\n                if (/\\.css$/.test(d) && !document.querySelector(\"link[rel=stylesheet][href^=\\\"\" + d + \"\\\"]\")) {\n                  appendLink(d, 'stylesheet')[\"catch\"](function () {// FIXME: handle failure\n                    // Right now, this is needed to prevent an unhandled rejection.\n                  });\n                }\n              });\n\n              _this3.loadRoute(route);\n            });\n          } else {\n            _this3.loadRoute(route);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"loadRoute\",\n    value: function loadRoute(route) {\n      var _this = this;\n\n      return (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var scriptRoute, url;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                route = _this.normalizeRoute(route);\n                scriptRoute = route === '/' ? '/index.js' : route + \".js\";\n                url = _this.assetPrefix + \"/_next/static/\" + encodeURIComponent(_this.buildId) + \"/pages\" + encodeURI(scriptRoute);\n\n                _this.loadScript(url, route, true);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }, {\n    key: \"loadScript\",\n    value: function loadScript(url, route, isPage) {\n      var _this4 = this;\n\n      var script = document.createElement('script');\n\n      if (process.env.__NEXT_MODERN_BUILD && hasNoModule) {\n        script.type = 'module'; // Only page bundle scripts need to have .module added to url,\n        // dependencies already have it added during build manifest creation\n\n        if (isPage) url = url.replace(/\\.js$/, '.module.js');\n      }\n\n      script.crossOrigin = process.crossOrigin;\n      script.src = url;\n\n      script.onerror = function () {\n        var error = new Error(\"Error loading script \" + url);\n        error.code = 'PAGE_LOAD_ERROR';\n\n        _this4.pageRegisterEvents.emit(route, {\n          error: error\n        });\n      };\n\n      document.body.appendChild(script);\n    } // This method if called by the route code.\n\n  }, {\n    key: \"registerPage\",\n    value: function registerPage(route, regFn) {\n      var _this5 = this;\n\n      var register = function register() {\n        try {\n          var mod = regFn();\n          var pageData = {\n            page: mod[\"default\"] || mod,\n            mod: mod\n          };\n          _this5.pageCache[route] = pageData;\n\n          _this5.pageRegisterEvents.emit(route, pageData);\n        } catch (error) {\n          _this5.pageCache[route] = {\n            error: error\n          };\n\n          _this5.pageRegisterEvents.emit(route, {\n            error: error\n          });\n        }\n      };\n\n      if (true) {\n        // Wait for webpack to become idle if it's not.\n        // More info: https://github.com/zeit/next.js/pull/1511\n        if (module.hot && module.hot.status() !== 'idle') {\n          console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\" + route + \"\\\"\");\n\n          var check = function check(status) {\n            if (status === 'idle') {\n              module.hot.removeStatusHandler(check);\n              register();\n            }\n          };\n\n          module.hot.status(check);\n          return;\n        }\n      }\n\n      register();\n    }\n  }, {\n    key: \"prefetch\",\n    value: function prefetch(route, isDependency) {\n      var _this2 = this;\n\n      return (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var cn, url, scriptRoute;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(cn = navigator.connection)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                if (!(cn.saveData || /2g/.test(cn.effectiveType))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                url = _this2.assetPrefix;\n\n                if (isDependency) {\n                  url += route;\n                } else {\n                  route = _this2.normalizeRoute(route);\n                  _this2.prefetched[route] = true;\n                  scriptRoute = (route === '/' ? '/index' : route) + \".js\";\n\n                  if (process.env.__NEXT_MODERN_BUILD && hasNoModule) {\n                    scriptRoute = scriptRoute.replace(/\\.js$/, '.module.js');\n                  }\n\n                  url += \"/_next/static/\" + encodeURIComponent(_this2.buildId) + \"/pages\" + encodeURI(scriptRoute);\n                }\n\n                if (!document.querySelector(\"link[rel=\\\"\" + relPrefetch + \"\\\"][href^=\\\"\" + url + \"\\\"], script[data-next-page=\\\"\" + route + \"\\\"]\")) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 7:\n                return _context2.abrupt(\"return\", _promise[\"default\"].all([appendLink(url, relPrefetch, url.match(/\\.css$/) ? 'style' : 'script'), process.env.__NEXT_GRANULAR_CHUNKS && !isDependency && _this2.getDependencies(route).then(function (urls) {\n                  return _promise[\"default\"].all(urls.map(function (url) {\n                    return _this2.prefetch(url, true);\n                  }));\n                })]).then( // do not return any data\n                function () {}, // swallow prefetch errors\n                function () {}));\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    }\n  }]);\n\n  return PageLoader;\n}();\n\nexports[\"default\"] = PageLoader;","map":{"version":3,"sources":["/Users/andreasfaust/components/react-sled/node_modules/next/dist/client/page-loader.js"],"names":["_interopRequireDefault","require","exports","__esModule","_asyncToGenerator2","_promise","_mitt","hasRel","rel","link","document","createElement","relList","supports","_unused","relPrefetch","hasNoModule","appendLink","href","as","res","rej","crossOrigin","process","onload","onerror","head","appendChild","PageLoader","buildId","assetPrefix","pageCache","prefetched","pageRegisterEvents","loadingRoutes","env","__NEXT_GRANULAR_CHUNKS","promisedBuildManifest","resolve","window","__BUILD_MANIFEST","__BUILD_MANIFEST_CB","route","then","man","map","url","encodeURI","Error","replace","loadPageScript","v","page","normalizeRoute","reject","fire","_ref","error","mod","off","cachedPage","on","querySelector","getDependencies","deps","forEach","d","test","loadScript","loadRoute","_this","scriptRoute","encodeURIComponent","isPage","script","__NEXT_MODERN_BUILD","type","src","code","emit","body","regFn","register","pageData","module","hot","status","console","log","check","removeStatusHandler","isDependency","_this2","cn","navigator","connection","saveData","effectiveType","all","match","urls","prefetch"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));var _promise=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));var _mitt=_interopRequireDefault(require(\"../next-server/lib/mitt\"));function hasRel(rel,link){try{link=document.createElement('link');return link.relList.supports(rel);}catch(_unused){}}var relPrefetch=hasRel('preload')&&!hasRel('prefetch')?// https://caniuse.com/#feat=link-rel-preload\n// macOS and iOS (Safari does not support prefetch)\n'preload':// https://caniuse.com/#feat=link-rel-prefetch\n// IE 11, Edge 12+, nearly all evergreen\n'prefetch';var hasNoModule='noModule'in document.createElement('script');function appendLink(href,rel,as){return new _promise.default((res,rej,link)=>{link=document.createElement('link');link.crossOrigin=process.crossOrigin;link.href=href;link.rel=rel;if(as)link.as=as;link.onload=res;link.onerror=rej;document.head.appendChild(link);});}class PageLoader{constructor(buildId,assetPrefix){this.buildId=buildId;this.assetPrefix=assetPrefix;this.pageCache={};this.prefetched={};this.pageRegisterEvents=(0,_mitt.default)();this.loadingRoutes={};if(process.env.__NEXT_GRANULAR_CHUNKS){this.promisedBuildManifest=new _promise.default(resolve=>{if(window.__BUILD_MANIFEST){resolve(window.__BUILD_MANIFEST);}else{window.__BUILD_MANIFEST_CB=()=>{resolve(window.__BUILD_MANIFEST);};}});}}// Returns a promise for the dependencies for a particular route\ngetDependencies(route){return this.promisedBuildManifest.then(man=>man[route]&&man[route].map(url=>\"/_next/\"+encodeURI(url))||[]);}normalizeRoute(route){if(route[0]!=='/'){throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\"+route+\"\\\"\");}route=route.replace(/\\/index$/,'/');if(route==='/')return route;return route.replace(/\\/$/,'');}loadPage(route){return this.loadPageScript(route).then(v=>v.page);}loadPageScript(route){route=this.normalizeRoute(route);return new _promise.default((resolve,reject)=>{var fire=(_ref)=>{var{error,page,mod}=_ref;this.pageRegisterEvents.off(route,fire);delete this.loadingRoutes[route];if(error){reject(error);}else{resolve({page,mod});}};// If there's a cached version of the page, let's use it.\nvar cachedPage=this.pageCache[route];if(cachedPage){var{error,page,mod}=cachedPage;error?reject(error):resolve({page,mod});return;}// Register a listener to get the page\nthis.pageRegisterEvents.on(route,fire);// If the page is loading via SSR, we need to wait for it\n// rather downloading it again.\nif(document.querySelector(\"script[data-next-page=\\\"\"+route+\"\\\"]\")){return;}if(!this.loadingRoutes[route]){this.loadingRoutes[route]=true;if(process.env.__NEXT_GRANULAR_CHUNKS){this.getDependencies(route).then(deps=>{deps.forEach(d=>{if(/\\.js$/.test(d)&&!document.querySelector(\"script[src^=\\\"\"+d+\"\\\"]\")){this.loadScript(d,route,false);}if(/\\.css$/.test(d)&&!document.querySelector(\"link[rel=stylesheet][href^=\\\"\"+d+\"\\\"]\")){appendLink(d,'stylesheet').catch(()=>{// FIXME: handle failure\n// Right now, this is needed to prevent an unhandled rejection.\n});}});this.loadRoute(route);});}else{this.loadRoute(route);}}});}loadRoute(route){var _this=this;return(0,_asyncToGenerator2.default)(function*(){route=_this.normalizeRoute(route);var scriptRoute=route==='/'?'/index.js':route+\".js\";var url=_this.assetPrefix+\"/_next/static/\"+encodeURIComponent(_this.buildId)+\"/pages\"+encodeURI(scriptRoute);_this.loadScript(url,route,true);})();}loadScript(url,route,isPage){var script=document.createElement('script');if(process.env.__NEXT_MODERN_BUILD&&hasNoModule){script.type='module';// Only page bundle scripts need to have .module added to url,\n// dependencies already have it added during build manifest creation\nif(isPage)url=url.replace(/\\.js$/,'.module.js');}script.crossOrigin=process.crossOrigin;script.src=url;script.onerror=()=>{var error=new Error(\"Error loading script \"+url);error.code='PAGE_LOAD_ERROR';this.pageRegisterEvents.emit(route,{error});};document.body.appendChild(script);}// This method if called by the route code.\nregisterPage(route,regFn){var register=()=>{try{var mod=regFn();var pageData={page:mod.default||mod,mod};this.pageCache[route]=pageData;this.pageRegisterEvents.emit(route,pageData);}catch(error){this.pageCache[route]={error};this.pageRegisterEvents.emit(route,{error});}};if(process.env.NODE_ENV!=='production'){// Wait for webpack to become idle if it's not.\n// More info: https://github.com/zeit/next.js/pull/1511\nif(module.hot&&module.hot.status()!=='idle'){console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\"+route+\"\\\"\");var check=status=>{if(status==='idle'){module.hot.removeStatusHandler(check);register();}};module.hot.status(check);return;}}register();}prefetch(route,isDependency){var _this2=this;return(0,_asyncToGenerator2.default)(function*(){// https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n// License: Apache 2.0\nvar cn;if(cn=navigator.connection){// Don't prefetch if using 2G or if Save-Data is enabled.\nif(cn.saveData||/2g/.test(cn.effectiveType))return;}var url=_this2.assetPrefix;if(isDependency){url+=route;}else{route=_this2.normalizeRoute(route);_this2.prefetched[route]=true;var scriptRoute=(route==='/'?'/index':route)+\".js\";if(process.env.__NEXT_MODERN_BUILD&&hasNoModule){scriptRoute=scriptRoute.replace(/\\.js$/,'.module.js');}url+=\"/_next/static/\"+encodeURIComponent(_this2.buildId)+\"/pages\"+encodeURI(scriptRoute);}if(document.querySelector(\"link[rel=\\\"\"+relPrefetch+\"\\\"][href^=\\\"\"+url+\"\\\"], script[data-next-page=\\\"\"+route+\"\\\"]\")){return;}return _promise.default.all([appendLink(url,relPrefetch,url.match(/\\.css$/)?'style':'script'),process.env.__NEXT_GRANULAR_CHUNKS&&!isDependency&&_this2.getDependencies(route).then(urls=>_promise.default.all(urls.map(url=>_this2.prefetch(url,true))))]).then(// do not return any data\n()=>{},// swallow prefetch errors\n()=>{});})();}}exports.default=PageLoader;"]},"metadata":{},"sourceType":"script"}