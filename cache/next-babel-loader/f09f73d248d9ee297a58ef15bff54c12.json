{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect } from 'react';\nimport { useSpring, animated } from 'react-spring';\nimport { useStateContext } from './state';\nimport useDragGesture from './hooks/useDragGesture';\nimport useFocus from './hooks/useFocus';\nimport useCursor from './hooks/useCursor';\nimport useX from './hooks/useX';\nimport { useSliderStyles, useViewStyles } from './hooks/useContainerStyles';\n\nvar SledSprings = function SledSprings(_ref) {\n  var onAnimationStart = _ref.onAnimationStart,\n      onAnimationEnd = _ref.onAnimationEnd,\n      onSledEnd = _ref.onSledEnd,\n      children = _ref.children;\n\n  var _useStateContext = useStateContext(),\n      _useStateContext2 = _slicedToArray(_useStateContext, 2),\n      _useStateContext2$ = _useStateContext2[0],\n      currentIndex = _useStateContext2$.currentIndex,\n      viewCount = _useStateContext2$.viewCount,\n      direction = _useStateContext2$.direction,\n      _useStateContext2$$di = _useStateContext2$.dimensions,\n      width = _useStateContext2$$di.width,\n      height = _useStateContext2$$di.height,\n      config = _useStateContext2$.config,\n      dispatch = _useStateContext2[1];\n\n  var cursor = useCursor();\n  var x = useX();\n\n  var _useSpring = useSpring(function () {\n    return {\n      x: 0,\n      cursor: cursor,\n      config: config,\n      immediate: true\n    };\n  }),\n      _useSpring2 = _slicedToArray(_useSpring, 2),\n      props = _useSpring2[0],\n      set = _useSpring2[1];\n\n  var springRef = React.useRef();\n  useFocus(springRef);\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dimensionsUpdated = _React$useState2[0],\n      setDimensionsUpdated = _React$useState2[1];\n\n  useEffect(function () {\n    setDimensionsUpdated(true);\n  }, [width, height]);\n  useEffect(function () {\n    if (!dimensionsUpdated) return;\n    setDimensionsUpdated(false);\n    set({\n      x: x,\n      immediate: true,\n      onStart: null,\n      onRest: null\n    });\n  }, [x, dimensionsUpdated]);\n  useEffect(function () {\n    if (dimensionsUpdated) return;\n    set({\n      config: config,\n      x: x,\n      cursor: cursor,\n      immediate: false,\n      onStart: function onStart() {\n        dispatch({\n          type: 'SET_PAUSE',\n          pause: true\n        });\n        if (typeof onAnimationStart === 'function') onAnimationStart();\n      },\n      onRest: function onRest() {\n        dispatch({\n          type: 'SET_PAUSE',\n          pause: false\n        });\n        if (typeof onAnimationEnd === 'function') onAnimationEnd();\n\n        if (currentIndex === viewCount - 1) {\n          if (typeof onSledEnd === 'function') onSledEnd();\n        }\n      }\n    });\n  }, [x, currentIndex, dimensionsUpdated, viewCount, cursor]);\n  var bind = useDragGesture(set);\n  var sliderStyles = useSliderStyles();\n  var viewStyles = useViewStyles();\n  return __jsx(animated.div, _extends({}, bind ? bind() : {}, {\n    className: \"sled-slider\",\n    ref: springRef,\n    style: _objectSpread({}, sliderStyles, {\n      transform: direction === 'horizontal' ? props.x.to(function (x) {\n        return \"translate3d(\".concat(x, \"px,0,0)\");\n      }) : props.x.to(function (x) {\n        return \"translate3d(0,\".concat(x, \"px,0)\");\n      }),\n      cursor: props.cursor\n    })\n  }), React.Children.map(children, function (child) {\n    return __jsx(\"div\", {\n      className: \"sled-element\",\n      style: viewStyles\n    }, child);\n  }));\n};\n\nexport default SledSprings;","map":null,"metadata":{},"sourceType":"module"}